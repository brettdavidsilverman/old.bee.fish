<!DOCTYPE html>
<html lang="en">
   <head>
      <script src="../head.js"></script>
      <meta charset="utf-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <script src="../power-encoding/bit-string/bit-string.js"></script>
      <script src="../power-encoding/stream/stream.js"></script>
      <script src="../power-encoding/number/number.js"></script>
      <script src="../power-encoding/string/string.js"></script>
      <script src="../id/id.js"></script>
      <script src="../pointer/pointer.js"></script>
      <script src="object.js"></script>
      <link rel="stylesheet" type="text/css" href="../style.css" />
      <title>Object</title>
   </head>
   <body>
      <h1>Object</h1>

      <h2>toString()</h2>
      
      <h3>Typed Arrays</h3>
      <pre>
         <script>
try {
   var numbers = Float32Array.from(
      [0, 1, 2, 3, 1/3, Math.PI]
   );
   
   document.writeln(numbers);
   
}
catch (error) {
   alert(error.stack);
}

         </script>
      </pre>
      <h3>Single Object</h3>
      <pre>
         <script>
try {
   function Person(firstName, lastName) {
      this.id;
      this.firstName = firstName;
      this.lastName = lastName;
   }

   var person = new Person(
      "Brett",
      "Silverman"
   );

   document.writeln(person);
   
}
catch (error) {
   alert(error.stack);
}

         </script>
      </pre>
      
      <h3>Object pointer (short hand)</h3>
      <pre>
         <script>
var car = {
   make: "Honda",
   model: "Prelude",
   driver: person
}
document.writeln(car);
         </script>
      </pre>

      <h3>Object (full)</h3>
      <pre>
         <script>
// Show with timestamp
car.id;
document.writeln(
   car.toString(
      {
         shortHand: "full"
      }
   )
);

         </script>
      </pre>
      
      <h3>Arrays</h3>
      <pre>
      <script>
var person2 = new Person(
   "Shaney",
   "Golden"
);

var people = [person, person2];

var car = {
   make: "Honda",
   model: "Prelude",
   drivers: people
}

document.writeln(car);

document.writeln(people);


         </script>
      </pre>

      <h3>Complex structures</h3>
      <pre>
      <script>
try {

   function A() {
      this.id;
   }
   var a = new A();

   function B() {
      this.id;
   }

   
   var b = new B();
   
   a.b = b;
   b.a = a;

   var memory = new Map();

   // show how to use memory to capture
   // child objects
   var aString = a.toString(
      {
         memory: memory,
         shortHand: "pointers"
      }
   );

   document.writeln(aString);

   document.writeln(memory.size);

   memory.forEach(
      function (value, key) {
         document.writeln(key);
      }
   );
   
   document.writeln(a);
   document.writeln(b);
}
catch (error) {
   alert(error.stack);
}
         </script>
      </pre>
   </body>
</html>