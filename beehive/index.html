<!DOCTYPE html>
<html lang="en">
   <head>
      <script src="/head.js"></script>
      <meta charset="utf-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0"/>
      <link rel="stylesheet" type="text/css" href="/style.css" />
      <link rel="stylesheet" type="text/css" href="style.css" />
      <title>Bee Hive</title>
      <script src="../client/logon/authentication.js"></script>
      <script src="../client/stream/stream.js"></script>
      <script src="../client/power-encoding/power-encoding.js"></script>
      <script src="../client/storage/storage.js"></script>
      <script src="../client/id/id.js"></script>
      <script src="../cllient/pointer/pointer.js"></script>
      <script src="../client/console/console.js"></script>
      <style>
      </style>
   </head>
   <body>
      <script src="/body.js"></script>
      <h1>Bee Hive</h1>
      <label for="hiveIPAddress">Hive IP Addresss</label>
      <input type="url" id="hiveIPAddress"></input>
      <button id="go" onclick="go()">go</button>
      <button id="stop" onclick="stop()">stop</button>
      <br />
      <img id="img"></img>
      <br/>
      <div id="weather"></div>
      <script>
var console = new Console();
console.log("Hello world");
var hiveIPAddress;
var getWeatherId;

function go() {
   stop();
   hiveIPAddress = document.getElementById("hiveIPAddress").value;
   var img = document.getElementById("img");
   var url = "https://" + hiveIPAddress + "/camera";
   img.src = url;
   getWeatherId = window.setInterval(getWeather, 5000);
}

function stop() {
   img.src = "";
   window.clearInterval(getWeatherId);
   getWeatherId = 0;
}

function getWeather() {
   var url = "https://" + hiveIPAddress + ":444/weather";
   var params = {}
   params.method = "GET";
   fetch(url, params)
      .then(response => response.json())
      .then(json => console.log(JSON.stringify(json)))
      .catch(error => console.log(error.stack));
}


      </script>

   </body>
</html>