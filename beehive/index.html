<!DOCTYPE html>
<html lang="en">
   <head>
      <script src="/head.js"></script>
      <meta charset="utf-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0"/>
<!--
      <link rel="stylesheet" type="text/css" href="/style.css" />
-->
      <link rel="stylesheet" type="text/css" href="style.css" />

      <title>Bee Hive</title>
      <script src="../client/logon/authentication.js"></script>
      <script src="../client/stream/stream.js"></script>
      <script src="../client/power-encoding/power-encoding.js"></script>
      <script src="../client/storage/storage.js"></script>
      <script src="../client/id/id.js"></script>
      <script src="../cllient/pointer/pointer.js"></script>
      <script src="../client/console/console.js"></script>
      <style>

div {
   border: 1px solid blue;
   float:left;
}

#weatherDiv {
   float:left;
   top: 0px;
}

#imgDiv {
   float: none;
}

#formDiv {
   float:right;
}

#controlDiv {
   float:right;
}
      </style>
   </head>
   <body>
      <script src="/body.js"></script>
      <h1>Bee Hive</h1>
      <div>
         <div id="leftDiv">
            <div id="weatherDiv">
               <table>
                  <tr>
                     <td>Temperature</td>
                     <td id="temperature" align="right"></td>
                     <td>Â°C</td>
                  </tr>
                  <tr>
                     <td>Humidity</td>
                     <td id="humidity" align="right"></td>
                     <td>%</td>
                  </tr>
                  <tr>
                     <td>Pressure</td>
                     <td id="pressure" align="right"></td>
                     <td>hPa</td>
                  </tr>
               </table>
            </div>
            <div id="formDiv">
               <label for="hiveOrigin">Hive Origin</label>
               <input type="url" id="hiveOrigin" value="https://feebeecam.local"></input>
               <button id="go" onclick="go()">go</button>
               <button id="stop" onclick="stop()">stop</button>
            </div>
            <div id="imgDiv">
               <img id="imgWinnie" src="data:image/jpeg;base64,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"></img>
               <img id="imgHive" src="https://feebeecam.local/camera"></img>
            </div>
         </div>
         <div id="controlDiv">
            <label for="size">Size</label>
            <select name="size" id="size" onchange="postSetting('framesize', this.value);">
               <option value="FRAMESIZE_QVGA">Very small</option>
               <option value="FRAMESIZE_CIF">Small</option>
               <option value="FRAMESIZE_SVGA">Medium</option>
               <option value="FRAMESIZE_XGA">Large</option>
               <option value="FRAMESIZE_QXGA">Very large</option>
            </select>
         </div>
      </div>
      <br/>
      <script>
//var console = new Console();
//console.log("Hello world");
var hiveOrigin;
var getWeatherId;
var imgWinnie = document.getElementById("imgWinnie");
var imgHive = document.getElementById("imgHive");
var temperature = document.getElementById("temperature");
var humidity = document.getElementById("humidity");
var pressure = document.getElementById("pressure");
var weatherURL;
var settingsURL;

function go() {
   stop();
   hiveOrigin = document.getElementById("hiveOrigin").value;
   
   var url = hiveOrigin + "/camera";
   imgHive.src = url;
   imgHive.onload = function() {
      imgWinnie.style.display = "none";
   }
   weatherURL = hiveOrigin + ":444/weather";
   settingsURL = hiveOrigin;
   getWeatherId = window.setInterval(getWeather, 5000);
   getWeather();
}

function stop() {
   imgHive.src = "";
   window.clearInterval(getWeatherId);
   getWeatherId = 0;
}

function getWeather() {
   var params = {}
   params.method = "GET";
   fetch(weatherURL, params)
      .then(response => response.json())
      .then(json => {
         temperature.innerHTML = json.temp.toFixed(2);
         humidity.innerHTML = json.humidity.toFixed(2);
         pressure.innerHTML = json.pressure.toFixed(2);
         return json;
      })
      .then(json => {
       //  console.log(JSON.stringify(json));
         return json;
      }
      )
      .catch(error => console.log(error.stack));
}

function postSetting(setting, value) {
   var params = {}
   params.method = "POST";
   params.body = JSON.stringify(
      {
         setting,
         value
      }
   );
   
   alert(settingsURL);

   fetch(settingsURL, params)
      .then(response => response.json())
      .then(json => alert(JSON.stringify(value)))
      .catch(error => alert(error));

}

window.onload = function() {
   go();
}

      </script>

   </body>
</html>